

/*----- Equal Height Columns for Bootstrap -----*/

$(document).ready(function() {
  $(function() {
    $('.equal-height').matchHeight();
    $('.benefits-header').matchHeight();
    $('.person-name').matchHeight();
    $('.person-position').matchHeight();
  });
});

/*----- Sticky Header Navbar on Scroll -----*/

$(document).ready(function() {
  if ($(window).width() > 760) {
    $(window).scroll(function() {
      if ($(this).scrollTop() > 1) {
        $('header').addClass("is-sticky");
        $('body').addClass("is-sticky");
      }
      else {
        $('header').removeClass("is-sticky");
        $('body').removeClass("is-sticky");
      }
    });
  }
});

/*----- Desktop Dropdown Menu -----*/

$(document).ready(function() {
  $('#dropdown-menu li').hover(function() {
    $(this).children('ul').stop(true, false, true).fadeToggle(300);
  });
});

/*----- Expanding Search Bar -----*/

$(document).ready(function(){
  var submitIcon = $('.header-searchbox-icon');
  var inputBox = $('.header-searchbox-input');
  var searchBox = $('.header-searchbox');
  var isOpen = false;
  submitIcon.click(function(){
    if(isOpen == false){
      searchBox.addClass('searchbox-open');
      inputBox.focus();
      isOpen = true;
    } else {
      searchBox.removeClass('searchbox-open');
      inputBox.focusout();
      isOpen = false;
    }
  });
 submitIcon.mouseup(function(){
    return false;
  });
  searchBox.mouseup(function(){
    return false;
  });
  $(document).mouseup(function(){
    if(isOpen == true){
      $('.header-searchbox-icon').css('display','block');
      submitIcon.click();
    }
  });
});

function headerButtonUp(){
  var inputVal = $('.header-searchbox-input').val();
  inputVal = $.trim(inputVal).length;
  if( inputVal !== 0) {
    $('.header-searchbox-icon').css('display','none');
  } else {
    $('.header-searchbox-input').val('');
    $('.header-searchbox-icon').css('display','block');
  }
}


$(document).ready(function(){
  var submitIcon = $('.header-searchbox-icon2');
  var inputBox = $('.header-searchbox-input2');
  var searchBox = $('.header-searchbox2');
  var isOpen = false;
  submitIcon.click(function(){
    if(isOpen == false){
      searchBox.addClass('searchbox-open');
      inputBox.focus();
      isOpen = true;
    } else {
      searchBox.removeClass('searchbox-open');
      inputBox.focusout();
      isOpen = false;
    }
  });
 submitIcon.mouseup(function(){
    return false;
  });
  searchBox.mouseup(function(){
    return false;
  });
  $(document).mouseup(function(){
    if(isOpen == true){
      $('.header-searchbox-icon2').css('display','block');
      submitIcon.click();
    }
  });
});

function headerButtonUp(){
  var inputVal = $('.header-searchbox-input2').val();
  inputVal = $.trim(inputVal).length;
  if( inputVal !== 0) {
    $('.header-searchbox-icon2').css('display','none');
  } else {
    $('.header-searchbox-input2').val('');
    $('.header-searchbox-icon2').css('display','block');
  }
}


$(document).ready(function(){
  var submitIcon = $('.footer-searchbox-icon');
  var inputBox = $('.footer-searchbox-input');
  var searchBox = $('.footer-searchbox');
  var isOpen = false;
  submitIcon.click(function(){
    if(isOpen == false){
      searchBox.addClass('searchbox-open');
      inputBox.focus();
      isOpen = true;
    } else {
      searchBox.removeClass('searchbox-open');
      inputBox.focusout();
      isOpen = false;
    }
  });
 submitIcon.mouseup(function(){
    return false;
  });
  searchBox.mouseup(function(){
    return false;
  });
  $(document).mouseup(function(){
    if(isOpen == true){
      $('.footer-searchbox-icon').css('display','block');
      submitIcon.click();
    }
  });
});

function footerButtonUp(){
  var inputVal = $('.footer-searchbox-input').val();
  inputVal = $.trim(inputVal).length;
  if( inputVal !== 0) {
    $('.footer-searchbox-icon').css('display','none');
  } else {
    $('.footer-searchbox-input').val('');
    $('.footer-searchbox-icon').css('display','block');
  }
}

/*----- Header Dropdown Menu -----*/

$(document).ready(function(){
    $('.menu-open').click(function(){
        $('#sticky-header').toggleClass('menu-opened');
    });

    $('.menu-mobile > li.menu-item:has(ul) > a').append("<span class='open-submenu'></span>");
    $('.menu-mobile li .open-submenu').click(function(e) {
      e.preventDefault();
    	$('.menu-mobile li').children('ul').stop(true, false, true).slideToggle(300);
      $('.menu-mobile li.menu-item:has(ul)').toggleClass('is-open');
    });
});

/*----- Panels -----*/

$(document).ready(function(){
  $(".panel-heading").click(function(e){
    e.preventDefault();
    $(e.currentTarget).parent().find('.panel-body').slideToggle("200");
    $(e.currentTarget).toggleClass("is-open");
  });
});


$(".scroll-button").click(function (event) {
      event.preventDefault();
      var id  = $(".scroll-button a").attr('href'),
          top = $(id).offset().top - 150;
      $('body,html').animate({scrollTop: top}, 800);
      $('a').css({"text-decoration" : "none"})
});



$('.google-map-btn').click(function(e){
      e.preventDefault();
      $('.google-map_modal').show();
      $('.google-map_bg').show();
})

$('.google-map_modal-close').click(function () {
      $('.google-map_modal').hide();
      $('.google-map_bg').hide();
})

$('.video-bg').click(function(e){
      e.preventDefault();
      $('.youtube_modal iframe').attr('src', 'https://www.youtube.com/embed/pBShv55k-m8?autoplay=1')
      $('.youtube_modal').show();
      $('.youtube_bg').show();
})

$('.video-play-hover').click(function(e){
      e.preventDefault();
      $('.youtube_modal iframe').attr('src', 'https://www.youtube.com/embed/pBShv55k-m8?autoplay=1')
      $('.youtube_modal').show();
      $('.youtube_bg').show();
})

$('.video-play').click(function(e){
      e.preventDefault();
      $('.youtube_modal iframe').attr('src', 'https://www.youtube.com/embed/pBShv55k-m8?autoplay=1')
      $('.youtube_modal').show();
      $('.youtube_bg').show();
})

$('.youtube_modal-close').click(function () {
  $('.youtube_modal iframe').attr('src', 'https://www.youtube.com/embed/pBShv55k-m8?autoplay=0')
      $('.youtube_modal').hide();
      $('.youtube_bg').hide();
})

$('footer .footer-subscribe-desktop').submit(function (e) {
    e.preventDefault();

    var email = $('footer .footer-subscribe-desktop .form-control').val();
    if(email == ""){
      $('footer .footer-subscribe-desktop').addClass("shake");
      setTimeout(function(){
        $('footer .footer-subscribe-desktop').removeClass("shake");
      }, 1000);
    }else {
      $('footer .footer-subscribe-desktop').hide();
      $('.footerSub').show();
      $.ajax({
          type: "POST",
          url: "../php/subscribeForm.php",
          data: {email: email},
          dataType: 'JSON'
      });

    }
});

$('footer .footer-subscribe-mobile').submit(function (e) {
    e.preventDefault();

    var email = $('footer .footer-subscribe-mobile .form-control').val();
    alert(email)
    if(email == ""){
      $('footer .footer-subscribe-mobile').addClass("shake");
      setTimeout(function(){
        $('footer .footer-subscribe-mobile').removeClass("shake");
      }, 1000);
    }else {
      $('footer .footer-subscribe-mobile').hide();
      $('.footerSub').show();
      $.ajax({
          type: "POST",
          url: "../php/subscribeForm.php",
          data: {email: email},
          dataType: 'JSON'
      });

    }
});

$('#callbackForm').submit(function (e) {
    e.preventDefault();

    var name = $('#callbackName').val();
    var email = $('#callbackEmail').val();
    var phone = $('#callbackPhone').val();
    var message = $('#callbackMessage').val();

    if(email == "" || name == "" || phone == "" || message == ""){
      $('#callbackForm .btn-submit').addClass("shake");
      setTimeout(function(){
        $('#callbackForm .btn-submit').removeClass("shake");
      }, 1000);
    }else {
      $('#callbackForm').hide();
      $('#callbackModal .modal-description').hide();
      $('.formSend').show();
      $.ajax({
          type: "POST",
          url: "../php/callbackForm.php",
          data: {name: name, phone: phone, message: message, email: email},
          dataType: 'JSON'
      });

      setTimeout(function(){
        $('#callbackForm').show();
        $('#callbackModal .modal-description').show();
        $('.formSend').hide();
        $('input').val('');
        $('textarea').val('');
      }, 3000)

    }
});


$('#contactForm').submit(function (e) {
    e.preventDefault();
    var name = $('#contactName').val();
    var email = $('#contactEmail').val();
    var phone = $('#contactPhone').val();
    var message = $('#contactMessage').val();

    if(email == "" || name == "" || phone == "" || message == ""){
      $('#contactForm .btn-submit').addClass("shake");
      setTimeout(function(){
        $('#contactForm .btn-submit').removeClass("shake");
      }, 1000);
    }else {
      $('#contactForm').hide();
      $('.formSend').show();
      $.ajax({
          type: "POST",
          url: "../php/contactForm.php",
          data: {name: name, phone: phone, message: message, email: email},
          dataType: 'JSON'
      });

      setTimeout(function(){
        $('#contactForm').show();
        $('.formSend').hide();
        $('input').val('');
        $('textarea').val('');
      }, 5000)

    }
});


$('#messageForm').submit(function (e) {
    e.preventDefault();

    var name = $('#messageName').val();
    var email = $('#messageEmail').val();
    var phone = $('#messagePhone').val();
    var message = $('#messageMessage').val();

    if(email == "" || name == "" || phone == "" || message == ""){
      $('#messageForm .btn-submit').addClass("shake");
      setTimeout(function(){
        $('#messageForm .btn-submit').removeClass("shake");
      }, 1000);
    }else {
      $('#messageForm').hide();
      $('#messageModal .modal-description').hide();
      $('.formSend').show();
      $.ajax({
          type: "POST",
          url: "../php/messageForm.php",
          data: {name: name, phone: phone, message: message, email: email},
          dataType: 'JSON'
      });

      setTimeout(function(){
        $('#messageForm').show();
        $('#messageModal .modal-description').show();
        $('.formSend').hide();
        $('input').val('');
        $('textarea').val('');
      }, 3000)

    }
});


$('#phoneForm').submit(function (e) {
    e.preventDefault();

    var name = $('#phoneName').val();
    var phone = $('#phonePhone').val();

    if(name == "" || phone == ""){
      $('#phoneForm .btn-submit').addClass("shake");
      setTimeout(function(){
        $('#phoneForm .btn-submit').removeClass("shake");
      }, 1000);
    }else {
      $('#phoneForm').hide();
      $('#phoneModal .modal-description').hide();
      $('.formSend').show();
      $.ajax({
          type: "POST",
          url: "../php/phoneForm.php",
          data: {name: name, phone: phone},
          dataType: 'JSON'
      });

      setTimeout(function(){
        $('#phoneForm').show();
        $('#phoneModal .modal-description').show();
        $('.formSend').hide();
        $('input').val('');
        $('textarea').val('');
      }, 3000)

    }
});



$('#feedback-form').submit(function (e) {
    e.preventDefault();

    var category = $('#feedback-select').val();
    
    if(category == ""){
      $('#feedback-form').addClass("shake");

      setTimeout(function(){
        $('#feedback-form').removeClass("shake");

      }, 1000);
    }else {
        $('#messageSelect').addClass('select2');
        $('.select2').selectric('refresh');
     /* $.ajax({
          type: "POST",
          url: "post.php",
          data: {name: name, phone: phone, message: message, email: email},
          dataType: 'JSON'
      });*/

    }
});

$('#feedback-select').change(function(){
  $('#feedback-form button').attr("data-toggle", "modal");
  var modVal = $('#feedback-select').val();
  var options1 = $('#messageModal option');
  var optionLength = $('#messageModal option').length;

  for(var q=0; q<optionLength; q++){
      
    if($(options1[q]).val().toLowerCase() == modVal.toLowerCase()){
      document.querySelectorAll('#messageModal option')[q].setAttribute("selected", "");
    }
  }

})

$('.mailbox').click(function(){
  $('#messageSelect').addClass('select2');
  $('.select2').selectric('refresh');
})


function fun1(chislo, thiis) {

  $(thiis).animateNumber(
        {
          number: chislo,
          /*easing: 'easeInQuad', // требует jquery.easing*/

          // опциональный аргумент: функция шага анимации числа
          // здесь используется, чтобы добавить '%' в конце числа
          numberStep: function(now, tween) {

            var floored_number = Math.floor(now),
                target = $(tween.elem);
            if(String(floored_number).length > 3){
              var strFloor = String(floored_number);
              var strLength = strFloor.length;
              var strNumb = strFloor.substring(0,strLength - 3) + " " + strFloor.substring(strLength - 3);
              target.text(strNumb);
            }
            else{
              target.text(floored_number);
            }
            
            
          }
        },
        1800
      );

}


$('.calcDiv').click(function(event){
  event.stopPropagation();
  if($(this).parent().hasClass('active')){
    $(this).parent().children('a').focus();
    return false;
  }
  else{
    $(this).parent().children('a').tab('show');
    for(var i=0; i<$('.calc .nav-tabs li').length; i++){
      document.querySelectorAll('.calc .nav-tabs li')[i].classList.remove("active");
    }
    $(this).parent().addClass('active');
    $(this).parent().children('a').focus();
    $('.donttouch').css({'display' : 'block'});
    setTimeout(function(){$('.donttouch').css({'display' : 'none'})}, 1800);
    var odometerArr = document.getElementsByClassName('odometer');
    for(var i=0; i<odometerArr.length; i++){
      var repStr = $(odometerArr[i]).text();
      repStr = repStr.replace(/\s+/g, "");
      fun1(parseInt(repStr), $(odometerArr[i]));
      
    }
  }
})

$('.calc .nav-tabs li a').click(function xer(){
  if($(this).parent().hasClass('active')){
    return false;
  }
  else{
    for(var i=0; i<$('.calc .nav-tabs li').length; i++){
      document.querySelectorAll('.calc .nav-tabs li')[i].classList.remove("active");
    }
    
    $('.donttouch').css({'display' : 'block'});
    setTimeout(function(){$('.donttouch').css({'display' : 'none'})}, 1800);
    var odometerArr = document.getElementsByClassName('odometer');
    for(var i=0; i<odometerArr.length; i++){
      var repStr = $(odometerArr[i]).text();
      repStr = repStr.replace(/\s+/g, "");
      fun1(parseInt(repStr), $(odometerArr[i]));
      
    }
  }
})



var current_year = new Date().getFullYear();
$(".current-year").text(current_year);

$(document).ready(function(){
  $(window).scroll(function(){
    if($(window).scrollTop() > 300){
      $('#sticky-header').addClass("header-shadow");
    }
    else{
      $('#sticky-header').removeClass("header-shadow");
    }
  })
})


if($(window).width() <= 480 || $(window).height() <= 480){
  $('header .container').css({'margin':'8px auto'})
  var lastScrollTop = 0;
  $(window).scroll(function(event){
  var st = $(this).scrollTop();
  if (st > lastScrollTop){
     if($(window).scrollTop() > 80){
       setTimeout(function(){
        $('header').css({'position':'static'});
        $('.page-section.about').css({'marginTop':'0'});
        $('.top-banner').css({'marginTop':'0'});
      },150);
     }
  } else {
     if($(window).scrollTop() > 80){
       setTimeout(function(){
        $('header').css({'position':'fixed'});
        $('.page-section.about').css({'marginTop':'80px'});
        $('.top-banner').css({'marginTop':'80px'});
      },150);
     }
     else if($(window).scrollTop() === 0){
       setTimeout(function(){
        $('header').css({'position':'static'});
        $('.page-section.about').css({'marginTop':'0'});
        $('.top-banner').css({'marginTop':'0'});
      },100);
     }
  }
  lastScrollTop = st;
  });
}





$(document).ready(function() {
  $('footer .navbar').addClass("hidden").viewportChecker({
  classToAdd: 'visible animated fadeInUp',
  offset: 100
  });
});

$(document).ready(function() {
  $('footer .footer-logo').addClass("hidden").viewportChecker({
  classToAdd: 'visible animated fadeInUp',
  offset: 100
  });
});

$(document).ready(function() {
  $('footer .footer-social').addClass("hidden").viewportChecker({
  classToAdd: 'visible animated fadeInUp',
  offset: 100
  });
});

$(document).ready(function() {
  $('footer .footer-subscribe').addClass("hidden").viewportChecker({
  classToAdd: 'visible animated fadeInUp',
  offset: 100
  });
});

$(document).ready(function() {
  $('footer .footer-address').addClass("hidden").viewportChecker({
  classToAdd: 'visible animated fadeInUp',
  offset: 100
  });
});

$(document).ready(function() {
  $('footer .footer-phone').addClass("hidden").viewportChecker({
  classToAdd: 'visible animated fadeInUp',
  offset: 100
  });
});

$(document).ready(function() {
  $('footer .footer-credits').addClass("hidden").viewportChecker({
  classToAdd: 'visible animated fadeInUp',
  offset: 100
  });
});



$(window).load(function() {
  $('.tab-content').viewportChecker({
      callbackFunction: function () {
        var odometerArr = document.getElementsByClassName('odometer');
        for(var i=0; i<odometerArr.length; i++){

          var repStr = $(odometerArr[i]).text();
          repStr = repStr.replace(/\s+/g, "");

          fun1(parseInt(repStr), $(odometerArr[i]));
          
        }
      }
  });

});

$('.product-link').click(function(e){
  e.preventDefault();
});


$(".social a").click(function (e) {
  e.preventDefault();
})

 $('.select2').on('selectric-change', function(event, element, selectric) {
    
   $('.selectric-select2 .selectric .label').attr('id', 'label-color');
 });

function colorChange(){
  $('#messageForm .selectric-select2 .selectric .label').attr('id', 'label-color');
}

function colorChange2(){
  $('#contactForm .selectric-select .selectric .label').attr('id', 'label-color');
}


function productModal(thiis){
  $('#productDetailsModal .modal-thumbnail img').attr('src', $(thiis).attr('data-img'));
  $('#productDetailsModal .modal-header').html($(thiis).attr('data-title'));
  $('#productDetailsModal .product-description').html($(thiis).attr('data-text'));
}

  if ($(window).width() <= 1200) {
   $('#menuOpen').click(function(){
     $('header').toggleClass('overHeader');
     $('body').toggleClass('overBody');
   })
  }

  $("#view_map").click(function (event) {
        event.preventDefault();
        var id  = $("#view_map").attr('href'),
            top = $(id).offset().top - 250;
        $('body,html').animate({scrollTop: top}, 800);
  });

  $('#contactForm').submit(function (e) {
      e.preventDefault();
      var name = $('#contactName').val();
      var email = $('#contactEmail').val();
      var phone = $('#contactPhone').val();
      var message = $('#contactMessage').val();

      if(email == "" || name == "" || phone == "" || message == ""){
        $('#contactForm .btn-submit').addClass("shake");
        setTimeout(function(){
          $('#contactForm .btn-submit').removeClass("shake");
        }, 1000);
      }else {
        $('#contactForm').hide();
        $('.formSend').show();
        $.ajax({
            type: "POST",
            url: "../php/contactForm.php",
            data: {name: name, phone: phone, message: message, email: email},
            dataType: 'JSON'
        });

        setTimeout(function(){
          $('#contactForm').show();
          $('.formSend').hide();
          $('input').val('');
          $('textarea').val('');
        }, 5000)

      }
  });


  $('.store-page .product-item .product-name').click(function(){
    $(this).parent().click();
  })

  $('.product-item').click(function(){
    productModal($(this).children());
    getitemStore($(this));
  })

  var currentItemStore;
  function getitemStore(thiis){
    currentItemStore = thiis;
  }


  $('.product-detail-store .modal-button-prev').click(function(){
    if(currentItemStore.prev().length === 0){
      $('.product-item').last().click();
      $('.product-item').last().click();
    }
    else{
      currentItemStore.prev().click();
    }
  })

  $('.product-detail-store .modal-button-next').click(function(){
    if(currentItemStore.next().length === 0){
      $('.product-item').first().click();
      $('.product-item').first().click();
    }
    else{
      currentItemStore.next().click();
    }
  })


 
  $('.owl-carousel').owlCarousel({
      loop:true,
      margin:10,
      autoplay:true,
      nav:true,
      responsiveClass:true,
      responsive:{
          1199: {
              items: 5,
              nav: true,
              
              dots:true
          },
          767: {
              items: 3,
              nav: true,
              
              dots:true
          },
          640: {
              items: 2,
              nav: true,
              
              dots:false
          },
          480: {
              items: 1,
              nav: true,
              
              dots:false
          },
          320: {
              items: 1,
              nav: true,
              
              dots:false
          }
      }
  })

  //Делегируем события кнопок next prev по умолчанию нашим кнопкам, которые могут находится вне контейнера слайдера
    var owl=$(".owl-carousel");
    //$(".next") - находим нашу кнопку
    $(".swiper-button-prev").click(function(){
      owl.trigger("prev.owl.carousel");
    });
    $(".swiper-button-next").click(function(){
      owl.trigger("next.owl.carousel");
    });


    var currentItem;
    function getitem(thiis){
      currentItem = thiis;
    }

    $('.owl-item').click(function(){
      productModal($(this).children());
      getitem($(this).children());
    })


    $('.modal-button-prev').click(function(){
      if(currentItem.parent().prev().length === 0){
        $('.owl-item').last().click();
        $('.owl-item').last().click();
      }
      else{
        currentItem.parent().prev().click();
      }
    })

    $('.modal-button-next').click(function(){
      if(currentItem.parent().next().length === 0){
        $('.owl-item').first().click();
        $('.owl-item').first().click();
      }
      else{
        currentItem.parent().next().click();
      }
    })


